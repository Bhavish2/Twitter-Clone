extends layouts/main-layout.pug

block content
    if !profileUser
       h1 Check the Url you are trying to access
    else
        script.
            var profileUserId='!{profileUser._id}';
            var selectedTab='!{selectedTab}'

        -followersCount=profileUser.followers.length
        -followingCount=profileUser.following.length

        .profileHeaderContainer
             .coverPhotoContainer
                 .userImageContainer
                      img(src=profileUser.ProfilePic,alt="User Profile Image")

                      if profileUser._id==UserLoggedin._id
                          button.profilePictureButton(data-toggle="modal",data-target="")
                              i.fas.fa-camera



             .profileButtonsContainer
                      if profileUser._id!=UserLoggedin._id
                            a.profileButton(href=`/messages/${profileUser._id}`)
                                 i.fas.fa-envelope
                            - var profileUserId=profileUser._id.toString();
                            - if(UserLoggedin.following && UserLoggedin.following.includes(profileUserId))
                                 +createFollowButton(profileUser,true)
                            - else
                                 +createFollowButton(profileUser,false)
             .userDetailsContainer
                 span.displayName #{profileUser.firstname} #{profileUser.lastname}
                 span.username @#{profileUser.username}
                 span.description #{profileUser.description}


                 .followersContainer
                    a(href=`/profile/${profileUser.username}/following`)
                        span.value #{followingCount}
                        span Following
                    a(href=`/profile/${profileUser.username}/followers`)
                         span#followersValue.value #{followersCount}
                         span Followers

        .tabsContainer
            +createTab("Posts",`/profile/${profileUser.username}`,selectedTab!="replies")
            +createTab("Replies",`/profile/${profileUser.username}/replies`,selectedTab=="replies")

        .postsContainer
        +createPostModals(UserLoggedin)

block scripts
    script(src="/js/profile.js")
